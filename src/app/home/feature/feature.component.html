<section id="feature" class="feature">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-5 col-lg-5" *ngIf="!bMobile">
        <img src="{{ steps[activeDesktopImgIndex].IMG.SRC }}" alt="{{ steps[activeDesktopImgIndex].IMG.ALT }}" class="img-fluid" alt="">
      </div>
      <div class="col-sm-10 col-md-7 col-lg-7 mx-auto">
        <h2 class="title text-center text-sm-left">{{ 'HOME.FEATURE.TITLE' | translate }}</h2>

        <ng-container *ngIf="!bError; else error">
          <ng-container *ngIf="steps.length >= 1; else loading">
            <mat-accordion>
              <mat-expansion-panel *ngFor="let step of steps; let i = index; first as isFirst;" [expanded]="isFirst" (click)="activeDesktopImgIndex = i;"
              [class.active]="(bMobile == false) && (i == activeDesktopImgIndex)"
              [class.clickable]="(bMobile == false) && (i != activeDesktopImgIndex) ">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                      <span class="align-middle">{{ i + 1 + ". " + step.NAME }}</span>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <div class="col-10 mx-auto" *ngIf="bMobile">
                      <img src="{{ steps[activeDesktopImgIndex].IMG.SRC }}" alt="{{ steps[activeDesktopImgIndex].IMG.ALT }}" class="img-fluid" alt="">
                    </div>
                    <p> {{ step.DESCRIPTION}} </p>
                  </ng-template>
              </mat-expansion-panel>
            </mat-accordion>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </div>
</section>

<ng-template #loading>
  <p>Loading...</p>
</ng-template>

<ng-template #error>
  <p>An error occured, cannot get the translation.</p>
</ng-template>
